<section
  id="inicio"
  aria-label="Featured properties banner"
  class="relative w-full max-w-full overflow-x-hidden"
>
  <div *ngIf="featuredProperties.length > 0" class="relative w-full max-w-full">
    <div
      #track
      class="relative flex w-full max-w-full snap-x snap-mandatory overflow-x-auto scroll-smooth overscroll-x-contain [-ms-overflow-style:none] [scrollbar-width:none] [&::-webkit-scrollbar]:hidden"
      (scroll)="onTrackScroll()"
    >
      <article
        *ngFor="let property of featuredProperties; trackBy: trackByPropertyId"
        class="relative w-full min-w-full flex-none snap-start"
        aria-roledescription="slide"
      >
        <div
          class="relative h-[52vh] w-full sm:h-[60vh] md:h-[68vh] lg:h-[72vh]"
        >
          <img
            class="absolute inset-0 h-full w-full max-w-full object-cover object-center"
            [src]="property.images[0]"
            [alt]="property.title + ' - featured image'"
            loading="lazy"
          />

          <div
            class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-black/10"
          ></div>

          <div
            class="absolute inset-16 bottom-0 px-4 pb-12 pt-16 sm:pb-14 md:pb-16"
             [ngClass]="{'inset-48': !isMobile}"
          >
            <div class="mx-auto w-full max-w-5xl text-center">
              <h2 class="text-2xl font-semibold text-white md:text-4xl">
                {{ property.title }}
              </h2>
              <p class="mt-2 text-sm text-white/90 md:text-base">
                {{ property.description }}
              </p>
            </div>
          </div>
        </div>
      </article>
    </div>

    <button
      type="button"
      class="absolute left-3 top-1/2 z-10 flex h-10 w-10 -translate-y-1/2 items-center justify-center rounded-full bg-black/40 text-white transition-colors duration-300 hover:bg-primary focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-black/20 md:h-12 md:w-12"
      aria-label="Previous slide"
      (click)="goToPrevious()"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 20 20"
        fill="currentColor"
        class="h-5 w-5 md:h-6 md:w-6"
      >
        <path
          fill-rule="evenodd"
          d="M12.79 15.77a.75.75 0 0 1-1.06.02l-5-4.5a.75.75 0 0 1 0-1.12l5-4.5a.75.75 0 1 1 1.04 1.08L8.39 10l4.42 3.98a.75.75 0 0 1-.02 1.06Z"
          clip-rule="evenodd"
        />
      </svg>
    </button>

    <button
      type="button"
      class="absolute right-3 top-1/2 z-10 flex h-10 w-10 -translate-y-1/2 items-center justify-center rounded-full bg-black/40 text-white transition-colors duration-300 hover:bg-primary focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-black/20 md:h-12 md:w-12"
      aria-label="Next slide"
      (click)="goToNext()"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 20 20"
        fill="currentColor"
        class="h-5 w-5 md:h-6 md:w-6"
      >
        <path
          fill-rule="evenodd"
          d="M7.21 4.23a.75.75 0 0 1 1.06-.02l5 4.5a.75.75 0 0 1 0 1.12l-5 4.5a.75.75 0 1 1-1.04-1.08L11.61 10 7.19 6.02a.75.75 0 0 1 .02-1.06Z"
          clip-rule="evenodd"
        />
      </svg>
    </button>

    <div class="pointer-events-none absolute inset-x-0 bottom-4" [ngClass]="{'inset-y-[75%]': !isMobile}">
      <div
        class="mx-auto flex max-w-7xl items-center justify-center gap-2 px-4"
      >
        <button
          *ngFor="
            let property of featuredProperties;
            index as i;
            trackBy: trackByPropertyId
          "
          type="button"
          class="pointer-events-auto h-2.5 w-2.5 rounded-full transition-colors duration-300"
          [class.bg-primary]="i === activeIndex"
          [class.bg-white/60]="i !== activeIndex"
          [attr.aria-label]="'Go to slide ' + (i + 1)"
          (click)="goToIndex(i)"
        ></button>
      </div>
    </div>
  </div>
</section>
