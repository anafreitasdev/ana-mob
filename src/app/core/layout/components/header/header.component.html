<header id="header" class="header-inner">
  <div [class]="styled.headerInner">
    <a href="#inicio" class="flex items-center gap-2">
      <span [class]="styled.brand + ' brand'">{{ "APP.NAME" | translate }}</span>
    </a>

    <!-- Navegação desktop -->
    <nav [class]="styled.navListDesktop + ' menu-bar'">
      <a
        href="#inicio"
        [class]="
          styled.navItemDesktop + ' inline-flex items-center gap-2 text-white'
        "
        (click)="scrollTo('inicio', $event)"
      >
        {{ "HEADER.NAV.HOME" | translate }}
      </a>
      <a
        href="#imoveis"
        [class]="
          styled.navItemDesktop + ' inline-flex items-center gap-2  text-white'
        "
        (click)="scrollTo('imoveis', $event)"
      >
        {{ "HEADER.NAV.PROPERTIES" | translate }}
      </a>
      <a
        href="#contato"
        [class]="
          styled.navItemDesktop + ' inline-flex items-center gap-2  text-white'
        "
        (click)="scrollTo('contato', $event)"
      >
        {{ "HEADER.NAV.CONTACT" | translate }}
      </a>
      <button
        id="language-trigger"
        type="button"
        [attr.aria-label]="'HEADER.ARIA.SELECT_LANGUAGE' | translate"
        class="translate text-white"
      >
        {{ "HEADER.LANGUAGE.BUTTON" | translate }}
      </button>
      <ion-popover
        trigger="language-trigger"
        side="bottom"
        alignment="start"
        cssClass="language-popover"
        dismissOnSelect="true"
      >
        <ng-template>
          <div class="min-w-[180px] rounded-lg bg-white p-2">
            <button
              type="button"
              class="w-full rounded-md px-2 py-1 text-left text-sm font-medium text-text-primary hover:bg-gray-100"
              [class.bg-gray-100]="currentLanguage === 'pt-BR'"
              [class.text-blue-600]="currentLanguage === 'pt-BR'"
              (click)="setLanguage('pt-BR')"
            >
              {{ "HEADER.LANGUAGE.OPTIONS.PT_BR" | translate }}
            </button>
            <button
              type="button"
              class="w-full rounded-md px-2 py-1 text-left text-sm font-medium text-text-primary hover:bg-gray-100"
              [class.bg-gray-100]="currentLanguage === 'en-US'"
              [class.text-blue-600]="currentLanguage === 'en-US'"
              (click)="setLanguage('en-US')"
            >
              {{ "HEADER.LANGUAGE.OPTIONS.EN_US" | translate }}
            </button>
          </div>
        </ng-template>
      </ion-popover>
    </nav>

    <!-- Ações / menu mobile -->
    <button
      type="button"
      [class]="styled.mobileToggleButton"
      [attr.aria-label]="'HEADER.ARIA.OPEN_NAV_MENU' | translate"
      [attr.aria-expanded]="mobileMenuOpen"
      aria-controls="mobile-menu"
      (click)="toggleMobileMenu()"
    >
      <ion-icon name="menu-outline" class="w-6 h-6"></ion-icon>
    </button>
  </div>

  <div
    [class]="styled.mobileOverlay"
    [class.opacity-0]="!mobileMenuOpen"
    [class.pointer-events-none]="!mobileMenuOpen"
    (click)="closeMobileMenu()"
  ></div>

  <aside
    id="mobile-menu"
    [class]="styled.mobilePanel"
    [class.translate-x-full]="!mobileMenuOpen"
    role="dialog"
    aria-modal="true"
    [attr.aria-label]="'HEADER.ARIA.NAV_MENU' | translate"
  >
    <div [class]="styled.mobilePanelHeader">
      <span class="font-semibold text-primary">{{ "APP.NAME" | translate }}</span>
      <button
        type="button"
        [class]="styled.mobileCloseButton"
        [attr.aria-label]="'HEADER.ARIA.CLOSE_MENU' | translate"
        (click)="closeMobileMenu()"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="size-6"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M6 18 18 6M6 6l12 12"
          />
        </svg>
      </button>
    </div>

    <nav [class]="styled.navListMobile">
      <button
        type="button"
        [class]="styled.navItemMobile + ' flex items-center gap-2'"
        (click)="scrollTo('inicio', $event)"
      >
        {{ "HEADER.NAV.HOME" | translate }}
      </button>
      <button
        type="button"
        [class]="styled.navItemMobile + ' flex items-center gap-2'"
        (click)="scrollTo('imoveis', $event)"
      >
        {{ "HEADER.NAV.PROPERTIES" | translate }}
      </button>
      <button
        type="button"
        [class]="styled.navItemMobile + ' flex items-center gap-2'"
        (click)="scrollTo('contato', $event)"
      >
        {{ "HEADER.NAV.CONTACT" | translate }}
      </button>

      <button
        id="language-trigger-mobile"
        type="button"
        [class]="
          styled.navItemMobile + ' flex items-center justify-between gap-2'
        "
        [attr.aria-label]="'HEADER.ARIA.SELECT_LANGUAGE' | translate"
      >
        <span class="inline-flex items-center gap-2">
          {{ "HEADER.LANGUAGE.BUTTON" | translate }}
        </span>
        <span class="text-xs text-text-secondary">{{ currentLanguage }}</span>
      </button>
      <ion-popover
        trigger="language-trigger-mobile"
        side="bottom"
        alignment="start"
        cssClass="language-popover"
        dismissOnSelect="true"
      >
        <ng-template>
          <div class="min-w-[180px] rounded-lg bg-white p-2">
            <button
              type="button"
              class="w-full rounded-md px-2 py-1 text-left text-sm font-medium text-text-primary hover:bg-gray-100"
              [class.bg-gray-100]="currentLanguage === 'pt-BR'"
              [class.text-blue-600]="currentLanguage === 'pt-BR'"
              (click)="setLanguage('pt-BR')"
            >
              {{ "HEADER.LANGUAGE.OPTIONS.PT_BR" | translate }}
            </button>
            <button
              type="button"
              class="w-full rounded-md px-2 py-1 text-left text-sm font-medium text-text-primary hover:bg-gray-100"
              [class.bg-gray-100]="currentLanguage === 'en-US'"
              [class.text-blue-600]="currentLanguage === 'en-US'"
              (click)="setLanguage('en-US')"
            >
              {{ "HEADER.LANGUAGE.OPTIONS.EN_US" | translate }}
            </button>
          </div>
        </ng-template>
      </ion-popover>
    </nav>
  </aside>
</header>
